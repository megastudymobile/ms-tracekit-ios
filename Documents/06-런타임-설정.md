# ğŸ›ï¸ ëŸ°íƒ€ì„ ì„¤ì •

> ì‘ì„±ì¼: 2025-12-15
> ì‘ì„±ì: jimmy

## ê°œìš”

TraceKitëŠ” Xcodeì˜ Launch Argumentsë¥¼ í†µí•´ ëŸ°íƒ€ì„ì— ë¡œê¹… ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì•±ì„ ë‹¤ì‹œ ë¹Œë“œí•˜ì§€ ì•Šê³ ë„ ë¡œê·¸ ë ˆë²¨ì´ë‚˜ ì¶œë ¥ ëŒ€ìƒì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ’¡ TraceKitëŠ” ë™ê¸° API(`TraceKit.info(...)`)ì™€ ë¹„ë™ê¸° API(`await TraceKit.shared.info(...)`)ë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.
> ì¼ë°˜ ë¡œê¹…ì€ ë™ê¸° APIë¥¼ ê¶Œì¥í•˜ë©°, ì„¤ì • ë³€ê²½ì´ë‚˜ flush ë“±ì€ ë¹„ë™ê¸° APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

## Launch Arguments ì„¤ì • ë°©ë²•

### Xcodeì—ì„œ ì„¤ì •

1. Xcodeì—ì„œ ìŠ¤í‚¤ë§ˆ ì„ íƒ â†’ Edit Scheme (âŒ˜ + <)
2. Run â†’ Arguments íƒ­ ì„ íƒ
3. Arguments Passed On Launchì— ì¸ì ì¶”ê°€

```
-logLevel DEBUG
-logFilter Network,Auth
-disableFile
```

### ì½”ë“œì—ì„œ í™œì„±í™”

```swift
let logger = await TraceKitBuilder()
    .addConsole()
    .addOSLog()
    .addFile()
    .applyLaunchArguments()  // Launch Arguments ì ìš©
    .buildAsShared()
```

## ì§€ì› ì¸ì ëª©ë¡

### ë¡œê·¸ ë ˆë²¨

| ì¸ì | ê°’ | ì„¤ëª… |
|-----|-----|------|
| `-logLevel` | `VERBOSE`, `DEBUG`, `INFO`, `WARNING`, `ERROR`, `FATAL` | ìµœì†Œ ë¡œê·¸ ë ˆë²¨ ì„¤ì • |

```
-logLevel WARNING
```

### ì¹´í…Œê³ ë¦¬ í•„í„°

| ì¸ì | ê°’ | ì„¤ëª… |
|-----|-----|------|
| `-logFilter` | ì¹´í…Œê³ ë¦¬ ëª©ë¡ (ì‰¼í‘œ êµ¬ë¶„) | íŠ¹ì • ì¹´í…Œê³ ë¦¬ë§Œ ì¶œë ¥ |

```
-logFilter Network,Auth,Database
```

### ìƒ˜í”Œë§ ì„¤ì •

| ì¸ì | ê°’ | ì„¤ëª… |
|-----|-----|------|
| `-sampleRate` | 0.0 ~ 1.0 | ìƒ˜í”Œë§ ë¹„ìœ¨ |
| `-bufferSize` | ì •ìˆ˜ | ë²„í¼ í¬ê¸° |
| `-flushInterval` | ì´ˆ (ì‹¤ìˆ˜) | í”ŒëŸ¬ì‹œ ê°„ê²© |

```
-sampleRate 0.5
-bufferSize 50
-flushInterval 10.0
```

### Destination ì œì–´

| ì¸ì | ì„¤ëª… |
|-----|------|
| `-enableConsole` / `-disableConsole` | ì½˜ì†” ì¶œë ¥ |
| `-enableOSLog` / `-disableOSLog` | OSLog ì¶œë ¥ |
| `-enableFile` / `-disableFile` | íŒŒì¼ ì¶œë ¥ |
| `-enableSentry` / `-disableSentry` | Sentry ì „ì†¡ (ì‚¬ìš©ì êµ¬í˜„ ì‹œ) |
| `-enableDatadog` / `-disableDatadog` | Datadog ì „ì†¡ (ì‚¬ìš©ì êµ¬í˜„ ì‹œ) |
| `-enableCrashlytics` / `-disableCrashlytics` | Crashlytics ì „ì†¡ |

> ğŸ’¡ Destination identifierì™€ Launch Argument ë§¤í•‘:
> - `console` â†’ `-disableConsole`
> - `oslog` â†’ `-disableOSLog`
> - `file` â†’ `-disableFile`
> - `firebase.crashlytics` â†’ `-disableCrashlytics`
> - ì‚¬ìš©ì ì •ì˜ Destinationì˜ ê²½ìš° identifierì— ë”°ë¼ ì²˜ë¦¬

```
-disableFile
-disableSentry
```

### ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹

| ì¸ì | ì„¤ëª… |
|-----|------|
| `-enableMasking` | ë§ˆìŠ¤í‚¹ í™œì„±í™” |
| `-disableMasking` | ë§ˆìŠ¤í‚¹ ë¹„í™œì„±í™” |

```
-disableMasking
```

## ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### 1. ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹…

ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ë¡œê·¸ë§Œ ìƒì„¸íˆ ë³´ê³  ì‹¶ì„ ë•Œ:

```
-logLevel VERBOSE
-logFilter Network
-disableFile
-disableSentry
```

### 2. í”„ë¡œë•ì…˜ ì´ìŠˆ ì¬í˜„

í”„ë¡œë•ì…˜ê³¼ ë™ì¼í•œ í™˜ê²½ì—ì„œ íŠ¹ì • ë¬¸ì œ ë””ë²„ê¹…:

```
-logLevel DEBUG
-logFilter Auth,Database
-disableSentry
-disableDatadog
```

### 3. ë¯¼ê°ì •ë³´ í™•ì¸ (ê°œë°œìš©)

ë§ˆìŠ¤í‚¹ ì—†ì´ ì›ë³¸ ë°ì´í„° í™•ì¸:

```
-logLevel VERBOSE
-disableMasking
```

> âš ï¸ ì£¼ì˜: í”„ë¡œë•ì…˜ì—ì„œëŠ” ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€

### 4. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

ìµœì†Œ ë¡œê¹…ìœ¼ë¡œ ì„±ëŠ¥ ì¸¡ì •:

```
-logLevel ERROR
-sampleRate 0.01
-disableConsole
-disableOSLog
```

### 5. íŒŒì¼ ë¡œê·¸ë§Œ ìˆ˜ì§‘

ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—†ì´ íŒŒì¼ ë¡œê·¸ë§Œ ìˆ˜ì§‘:

```
-logLevel INFO
-disableConsole
-disableSentry
-disableDatadog
-disableCrashlytics
```

## ì½”ë“œ ì˜ˆì œ

### LaunchArgumentParser ì‚¬ìš©

```swift
import TraceKit

// í˜„ì¬ Launch Argumentsì—ì„œ ì„¤ì • íŒŒì‹±
if let config = LaunchArgumentParser.parse() {
    print("ìµœì†Œ ë ˆë²¨: \(config.minLevel)")
    print("ë¹„í™œì„±í™”ëœ Destinations: \(config.disabledDestinations)")
}

// íŠ¹ì • ì¸ì ë°°ì—´ë¡œ íŒŒì‹±
let testArgs = ["-logLevel", "DEBUG", "-disableFile"]
if let config = LaunchArgumentParser.parse(from: testArgs) {
    // config ì‚¬ìš©
}

// íŠ¹ì • Destination í™œì„±í™” ì—¬ë¶€ í™•ì¸
let isFileEnabled = LaunchArgumentParser.isDestinationEnabled(.file)
// nil: ì¸ì ì—†ìŒ, true: -enableFile, false: -disableFile
```

### TraceKitConfigurationê³¼ ë³‘í•©

```swift
// ê¸°ë³¸ ì„¤ì •
let baseConfig = TraceKitConfiguration(
    minLevel: .info,
    isSanitizingEnabled: true
)

// Launch Argument ì„¤ì •
if let launchConfig = LaunchArgumentParser.parse() {
    // ë³‘í•© (launchConfigê°€ ìš°ì„ )
    let finalConfig = baseConfig.merged(with: launchConfig)
    
    await TraceKit.shared.configure(finalConfig)
}
```

### í™˜ê²½ë³„ ê¸°ë³¸ê°’ + Override

```swift
@TraceKitActor
func setupTraceKit() async {
    #if DEBUG
    let defaultConfig = TraceKitConfiguration.debug
    #else
    let defaultConfig = TraceKitConfiguration.production
    #endif
    
    let builder = TraceKitBuilder()
        .addConsole()
        .addOSLog()
        .with(configuration: defaultConfig)
    
    // Launch Argumentsê°€ ìˆìœ¼ë©´ override
    if LaunchArgumentParser.parse() != nil {
        builder.applyLaunchArguments()
    }
    
    await builder.buildAsShared()
}
```

## Xcode Scheme í™œìš©

### ì—¬ëŸ¬ Scheme êµ¬ì„±

ë””ë²„ê¹… ëª©ì ì— ë”°ë¼ ì—¬ëŸ¬ Schemeì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

| Scheme | Launch Arguments | ìš©ë„ |
|--------|------------------|------|
| MyApp-Debug | (ì—†ìŒ) | ê¸°ë³¸ ê°œë°œ |
| MyApp-NetworkDebug | `-logLevel VERBOSE -logFilter Network` | ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹… |
| MyApp-AuthDebug | `-logLevel DEBUG -logFilter Auth -disableMasking` | ì¸ì¦ ë””ë²„ê¹… |
| MyApp-Minimal | `-logLevel ERROR -disableConsole` | ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ |
| MyApp-Production | (í”„ë¡œë•ì…˜ ì„¤ì •) | í”„ë¡œë•ì…˜ ì‹œë®¬ë ˆì´ì…˜ |

### Scheme ë³µì‚¬ ë° ì„¤ì •

1. ê¸°ì¡´ Scheme ì„ íƒ â†’ Duplicate Scheme
2. ìƒˆ ì´ë¦„ ì§€ì • (ì˜ˆ: `MyApp-NetworkDebug`)
3. Run â†’ Argumentsì— í•´ë‹¹ ì¸ì ì¶”ê°€
4. í•„ìš”ì— ë”°ë¼ Scheme ì „í™˜í•˜ë©° ê°œë°œ

## ë™ì‘ ìš°ì„ ìˆœìœ„

Launch ArgumentsëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ì ìš©ë©ë‹ˆë‹¤:

```
1. TraceKitConfiguration ê¸°ë³¸ê°’
2. TraceKitBuilder.with(configuration:)ë¡œ ì„¤ì •í•œ ê°’
3. Launch Arguments (applyLaunchArguments() í˜¸ì¶œ ì‹œ)
```

ì˜ˆì‹œ:

```swift
// 1. ê¸°ë³¸ê°’: minLevel = .verbose
let builder = TraceKitBuilder()
    // 2. ì½”ë“œ ì„¤ì •: minLevel = .info
    .with(configuration: TraceKitConfiguration(minLevel: .info))
    // 3. Launch Argument: -logLevel DEBUG â†’ minLevel = .debug
    .applyLaunchArguments()

// ìµœì¢… ê²°ê³¼: minLevel = .debug (Launch Argumentê°€ ìš°ì„ )
```

## í”„ë¡œë•ì…˜ ì£¼ì˜ì‚¬í•­

### ë³´ì•ˆ

```swift
#if DEBUG
// ë””ë²„ê·¸ì—ì„œë§Œ Launch Arguments ì ìš©
builder.applyLaunchArguments()
#endif
```

ë˜ëŠ” íŠ¹ì • ì¸ìë§Œ í—ˆìš©:

```swift
// í”„ë¡œë•ì…˜ì—ì„œëŠ” ë ˆë²¨ ë³€ê²½ë§Œ í—ˆìš©
#if !DEBUG
if let config = LaunchArgumentParser.parse() {
    // ë§ˆìŠ¤í‚¹ ë¹„í™œì„±í™”ëŠ” ë¬´ì‹œ
    let safeConfig = TraceKitConfiguration(
        minLevel: config.minLevel,
        isSanitizingEnabled: true  // í•­ìƒ í™œì„±í™”
    )
    await TraceKit.shared.configure(safeConfig)
}
#endif
```

### ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `-disableMasking` ì¸ìê°€ ì—†ëŠ”ì§€ í™•ì¸
- [ ] í”„ë¡œë•ì…˜ Schemeì— ë””ë²„ê·¸ìš© ì¸ìê°€ ì—†ëŠ”ì§€ í™•ì¸
- [ ] `applyLaunchArguments()`ê°€ í”„ë¡œë•ì…˜ì—ì„œ ì•ˆì „í•˜ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸

## ë¬¸ì œ í•´ê²°

### Launch Argumentsê°€ ì ìš©ë˜ì§€ ì•ŠìŒ

1. `applyLaunchArguments()` í˜¸ì¶œ í™•ì¸
2. Schemeì˜ Arguments Passed On Launch í™•ì¸
3. ì¸ì í˜•ì‹ í™•ì¸ (ì˜ˆ: `-logLevel` ë‹¤ìŒì— ê°’ í•„ìš”)

### ì¼ë¶€ ì¸ìë§Œ ì‘ë™

1. ì¸ì ì´ë¦„ ëŒ€ì†Œë¬¸ì í™•ì¸ (`-logLevel` ì˜¬ë°”ë¦„, `-TraceLevel` ì˜ëª»ë¨)
2. ê°’ì´ í•„ìš”í•œ ì¸ìì— ê°’ì´ ìˆëŠ”ì§€ í™•ì¸
3. ì‰¼í‘œ êµ¬ë¶„ ëª©ë¡ì— ê³µë°± ì—†ëŠ”ì§€ í™•ì¸ (`Network,Auth` ì˜¬ë°”ë¦„)

### ì„¤ì •ì´ ë®ì–´ì”Œì›Œì§

1. ì½”ë“œì—ì„œ `configure()` í˜¸ì¶œ ìˆœì„œ í™•ì¸
2. `applyLaunchArguments()` í˜¸ì¶œ ìœ„ì¹˜ í™•ì¸ (ë§ˆì§€ë§‰ì— í˜¸ì¶œ)

## ê´€ë ¨ íŒŒì¼

- `Projects/TraceKit/Sources/Configuration/LaunchArgumentParser.swift` - íŒŒì„œ êµ¬í˜„
- `Projects/TraceKit/Sources/Configuration/TraceKitConfiguration.swift` - ì„¤ì • êµ¬ì¡°ì²´
- `Projects/TraceKit/Sources/TraceKitBuilder.swift` - ë¹Œë” êµ¬í˜„

## ì´ì „ ë¬¸ì„œ

- [ì™¸ë¶€ ì—°ë™](./05-ì™¸ë¶€-ì—°ë™.md) - Sentry, Datadog, Firebase ì—°ë™
- [ëª©ì°¨](./00-ëª©ì°¨.md) - ì „ì²´ ë¬¸ì„œ ëª©ë¡

