# ğŸ“± ë°ëª¨ ì•± (TraceKitDemo)

> ì‘ì„±ì¼: 2025-12-15
> ì‘ì„±ì: jimmy

## ê°œìš”

TraceKitDemoëŠ” TraceKit í”„ë ˆì„ì›Œí¬ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì‹œì—°í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” SwiftUI ê¸°ë°˜ ì•±ì…ë‹ˆë‹¤. ë¯¸ë‹ˆë©€í•œ ë‹¤í¬ í…Œë§ˆ UIë¡œ ê° ê¸°ëŠ¥ì„ ì§ê´€ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| í•­ëª© | ê°’ |
|-----|-----|
| í”Œë«í¼ | iOS 15.0+ |
| UI í”„ë ˆì„ì›Œí¬ | SwiftUI |
| ì•„í‚¤í…ì²˜ | MVVM |
| ì˜ì¡´ì„± | TraceKit (Core), Firebase (Optional) |

## ì‹¤í–‰ ë°©ë²•

### 1. Firebase ì„¤ì • (Optional)

Firebase ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìì‹ ì˜ Firebase í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

1. [Firebase Console](https://console.firebase.google.com/)ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
2. iOS ì•± ì¶”ê°€ (Bundle ID: `com.tracekit.TraceKitDemo`)
3. `GoogleService-Info.plist` ë‹¤ìš´ë¡œë“œ
4. ë‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ `Projects/TraceKitDemo/Resources/` í´ë”ì— ë³µì‚¬

```bash
# ì˜ˆì‹œ íŒŒì¼ì´ ì œê³µë©ë‹ˆë‹¤
cp Projects/TraceKitDemo/Resources/GoogleService-Info.plist.example \
   Projects/TraceKitDemo/Resources/GoogleService-Info.plist

# ìœ„ íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ìì‹ ì˜ Firebase ì„¤ì •ì„ ì…ë ¥í•˜ì„¸ìš”
```

> **ì°¸ê³ **: Firebase ì„¤ì • ì—†ì´ë„ ì•±ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì€ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. Firebase ì—°ë™ ê¸°ëŠ¥ë§Œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.

### 2. Tuistë¡œ í”„ë¡œì íŠ¸ ìƒì„±

```bash
cd Projects/TraceKitDemo
tuist generate
```

### 3. Xcodeì—ì„œ ì—´ê¸°

```bash
open TraceKitDemo.xcworkspace
```

### 4. ì‹¤í–‰

- Scheme ì„ íƒ: **TraceKitDemo**
- Simulator ì„ íƒ: **iPhone 15 Pro**
- **âŒ˜ + R** (ì‹¤í–‰)

## í™”ë©´ êµ¬ì„±

ë°ëª¨ ì•±ì€ 10ê°œì˜ íƒ­ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### 1. Analytics (Firebase Analytics ì—°ë™)

Firebase Analyticsì™€ì˜ ì‹¤ì‹œê°„ ì—°ë™ì„ ì‹œì—°í•˜ëŠ” í™”ë©´ì…ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| ì´ë²¤íŠ¸ ë¡œê¹… | Firebase Analytics ì´ë²¤íŠ¸ ì „ì†¡ |
| ì‹¤ì‹œê°„ í™•ì¸ | DebugViewì—ì„œ ì´ë²¤íŠ¸ í™•ì¸ ê°€ëŠ¥ |

Firebase ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ì™¸ë¶€ ì—°ë™ - Firebase í†µí•© ëª¨ë“ˆ](./05-ì™¸ë¶€-ì—°ë™.md#firebase-í†µí•©-ëª¨ë“ˆ)ì„ ì°¸ê³ í•˜ì„¸ìš”.

### 2. Config (Remote Config)

Firebase Remote Configë¥¼ í†µí•œ ëŸ°íƒ€ì„ ì„¤ì • ë³€ê²½ì„ ì‹œì—°í•©ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| ì›ê²© ì„¤ì • | ì„œë²„ì—ì„œ ì„¤ì • ê°’ ê°€ì ¸ì˜¤ê¸° |
| ì‹¤ì‹œê°„ ì ìš© | ì•± ì¬ì‹œì‘ ì—†ì´ ì„¤ì • ë³€ê²½ |

ìì„¸í•œ ì‚¬ìš©ë²•ì€ [ì™¸ë¶€ ì—°ë™ - FirebaseRemoteConfigManager](./05-ì™¸ë¶€-ì—°ë™.md#4-firebaseremoteconfigmanager)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

### 3. Crashlytics (Firebase Crashlytics ì—°ë™)

Firebase Crashlyticsì™€ì˜ ì‹¤ì‹œê°„ ì—°ë™ì„ ì‹œì—°í•˜ëŠ” í™”ë©´ì…ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| í¬ë˜ì‹œ ë¦¬í¬íŒ… | Non-fatal ì—ëŸ¬ ì „ì†¡ |
| Breadcrumb | ë¡œê·¸ë¥¼ Breadcrumbìœ¼ë¡œ ê¸°ë¡ |

### 4. Shopping (ì‡¼í•‘ í”Œë¡œìš° ì¶”ì )

ì‹¤ì œ ì‡¼í•‘ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œì˜ ë¡œê¹… íŒ¨í„´ì„ ì‹œì—°í•©ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| í™”ë©´ ì „í™˜ ì¶”ì  | ìƒí’ˆ ì¡°íšŒ â†’ ì¥ë°”êµ¬ë‹ˆ â†’ ê²°ì œ íë¦„ |
| ì„±ëŠ¥ ì¸¡ì • | ê° ë‹¨ê³„ë³„ ì†Œìš” ì‹œê°„ ì¸¡ì • |
| Firebase Performance | Firebase Performance Monitoring ì—°ë™ |

### 5. Generator (ë¡œê·¸ ìƒì„±ê¸°)

ê° ë¡œê·¸ ë ˆë²¨ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í™”ë©´ì…ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| ë ˆë²¨ë³„ ë¡œê·¸ ìƒì„± | VERBOSE ~ FATAL 6ë‹¨ê³„ ë²„íŠ¼ |
| ì¹´í…Œê³ ë¦¬ ì„ íƒ | Default, Network, Auth, UI ë“± |
| ì»¤ìŠ¤í…€ ë©”ì‹œì§€ | ì§ì ‘ ë©”ì‹œì§€ ì…ë ¥ ê°€ëŠ¥ |
| ë©”íƒ€ë°ì´í„° í¬í•¨ | ì¶”ê°€ ì •ë³´ ì²¨ë¶€ ì˜µì…˜ |
| ì „ì²´ ë ˆë²¨ ì¶œë ¥ | ëª¨ë“  ë ˆë²¨ ìˆœì°¨ ì‹¤í–‰ |

ì‚¬ìš© ì˜ˆì‹œ:
1. ì¹´í…Œê³ ë¦¬ì—ì„œ "Network" ì„ íƒ
2. "INFO" ë²„íŠ¼ íƒ­
3. Viewer íƒ­ì—ì„œ ë¡œê·¸ í™•ì¸

Network Logging (JSON) ì„¹ì…˜:
- Request ë¡œê¹…: HTTP ìš”ì²­ ì •ë³´ (method, url, headers)
- Response ë¡œê¹…: ì‘ë‹µ ì •ë³´ (statusCode, body, duration)
- Error ë¡œê¹…: ì—ëŸ¬ ìƒì„¸ ì •ë³´ (code, message, retryable)
- ì „ì²´ ì‚¬ì´í´: Request â†’ Response â†’ Complete ìˆœì°¨ ì‹¤í–‰

### 6. Settings (ì„¤ì •)

TraceKit ì„¤ì •ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½í•˜ê³ , ì €ì¥ëœ ë¡œê·¸ íŒŒì¼ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ë¡œê·¸ ì„¤ì •

| ì„¤ì • í•­ëª© | ë²”ìœ„ | ì„¤ëª… |
|---------|------|------|
| Minimum Log Level | VERBOSE ~ FATAL | ì´ ë ˆë²¨ ì´ìƒë§Œ ì¶œë ¥ |
| Sensitive Data Masking | ON/OFF | ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ ì—¬ë¶€ |
| Sampling Rate | 0% ~ 100% | ë¡œê·¸ ìˆ˜ì§‘ ë¹„ìœ¨ |
| Buffer Size | 10 ~ 500 | ë²„í¼ ìµœëŒ€ í¬ê¸° |
| Flush Interval | 1s ~ 30s | ìë™ í”ŒëŸ¬ì‹œ ê°„ê²© |

ì„¤ì • ë³€ê²½ í›„ "Apply Settings" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì ìš©í•©ë‹ˆë‹¤.

#### ë¡œê·¸ íŒŒì¼ ê´€ë¦¬

ì €ì¥ëœ ë¡œê·¸ íŒŒì¼ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì•„ì´ì½˜ | ì„¤ëª… |
|-----|------|------|
| íŒŒì¼ ëª©ë¡ | - | ì €ì¥ëœ ë¡œê·¸ íŒŒì¼ ëª©ë¡ (ì´ë¦„, í¬ê¸°, ë‚ ì§œ) |
| ë‚´ìš© ë³´ê¸° | ğŸ“„ | ë¡œê·¸ íŒŒì¼ ë‚´ìš©ì„ í…ìŠ¤íŠ¸ë¡œ í™•ì¸ |
| ê°œë³„ ê³µìœ  | ğŸ“¤ | ì„ íƒí•œ íŒŒì¼ ë‚´ë³´ë‚´ê¸° (AirDrop, ë©”ì¼ ë“±) |
| ê°œë³„ ì‚­ì œ | ğŸ—‘ | ì„ íƒí•œ íŒŒì¼ ì‚­ì œ |
| Export All | - | ëª¨ë“  ë¡œê·¸ íŒŒì¼ í´ë” ë‚´ë³´ë‚´ê¸° |
| Delete All | - | ëª¨ë“  ë¡œê·¸ íŒŒì¼ ì‚­ì œ |
| ìƒˆë¡œê³ ì¹¨ | ğŸ”„ | íŒŒì¼ ëª©ë¡ ê°±ì‹  |

ë¡œê·¸ íŒŒì¼ ì €ì¥ ìœ„ì¹˜:
```
Library/Caches/Logs/log-YYYY-MM-DD.log
```

ë¡œê·¸ íŒŒì¼ì€ JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ë˜ë©°, ê¸°ë³¸ 7ì¼ê°„ ë³´ê´€ë©ë‹ˆë‹¤.

### 7. Viewer (ë¡œê·¸ ë·°ì–´)

ì‹¤ì‹œê°„ìœ¼ë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í™”ë©´ì…ë‹ˆë‹¤.

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| ì‹¤ì‹œê°„ ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ | ìƒˆ ë¡œê·¸ ìë™ í‘œì‹œ |
| ë ˆë²¨ë³„ í•„í„° | íŠ¹ì • ë ˆë²¨ë§Œ í•„í„°ë§ |
| ê²€ìƒ‰ | ë©”ì‹œì§€/ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ |
| ìë™ ìŠ¤í¬ë¡¤ | ìµœì‹  ë¡œê·¸ë¡œ ìë™ ì´ë™ |
| ìƒì„¸ ì •ë³´ | ë¡œê·¸ íƒ­í•˜ì—¬ íŒŒì¼/í•¨ìˆ˜/ë¼ì¸ í™•ì¸ |
| ë¡œê·¸ ì‚­ì œ | íœ´ì§€í†µ ë²„íŠ¼ìœ¼ë¡œ ì „ì²´ ì‚­ì œ |

ë¡œê·¸ í•­ëª©ì„ íƒ­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í¼ì³ì§‘ë‹ˆë‹¤:
- íŒŒì¼ëª…
- í•¨ìˆ˜ëª…
- ë¼ì¸ ë²ˆí˜¸
- ë©”íƒ€ë°ì´í„° (ìˆëŠ” ê²½ìš°)

### 8. Performance (ì„±ëŠ¥ ì¸¡ì •)

ì½”ë“œ ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ê¸°ëŠ¥ì„ ì‹œì—°í•©ë‹ˆë‹¤.

| ì‹œì—° í•­ëª© | ì„¤ëª… |
|---------|------|
| measure() ì‹œì—° | ë‹¨ì¼ ì‘ì—… ì‹œê°„ ì¸¡ì • |
| Span ì‹œì—° | ì¤‘ì²©ëœ ì‘ì—… ì¶”ì  (Parent/Child) |
| ë³‘ë ¬ ì‘ì—… ì‹œì—° | TaskGroup ë³‘ë ¬ ì²˜ë¦¬ |

ê° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹œë®¬ë ˆì´ì…˜ëœ ì‘ì—…ì´ ì‹¤í–‰ë˜ê³ , ì¸¡ì • ê²°ê³¼ê°€ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œë©ë‹ˆë‹¤.

Span ì‹œì—° ì˜ˆì‹œ:
```
ì „ì²´ í”„ë¡œì„¸ìŠ¤      1.05s
  â”” ë°ì´í„° í˜ì¹­    0.50s
  â”” ë°ì´í„° íŒŒì‹±    0.30s
  â”” UI ì—…ë°ì´íŠ¸    0.20s
```

### 9. Sanitizer (ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹)

ë¯¼ê°ì •ë³´ ìë™ ë§ˆìŠ¤í‚¹ ê¸°ëŠ¥ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ì§€ì› íŒ¨í„´ | ì›ë³¸ ì˜ˆì‹œ | ë§ˆìŠ¤í‚¹ ê²°ê³¼ |
|---------|---------|-----------|
| ì´ë©”ì¼ | john@example.com | [EMAIL_REDACTED] |
| ì‹ ìš©ì¹´ë“œ | 1234-5678-9012-3456 | [CARD_REDACTED] |
| ì „í™”ë²ˆí˜¸ | 010-1234-5678 | [PHONE_REDACTED] |
| IP ì£¼ì†Œ | 192.168.1.100 | [IP_REDACTED] |
| JWT í† í° | eyJhbG... | [JWT_REDACTED] |
| ë¹„ë°€ë²ˆí˜¸ | password=secret | [PASSWORD_REDACTED] |

Custom Test ì˜ì—­ì—ì„œ ì§ì ‘ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³  ë§ˆìŠ¤í‚¹ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 10. Crash (í¬ë˜ì‹œ ë¡œê·¸ ë³´ì¡´)

`CrashTracePreserver` ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í™”ë©´ì…ë‹ˆë‹¤. í¬ë˜ì‹œ ë°œìƒ ì‹œ ë¡œê·¸ë¥¼ ë³´ì¡´í•˜ê³  ë³µêµ¬í•˜ëŠ” ì „ì²´ í”Œë¡œìš°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### í™”ë©´ êµ¬ì„±

**Status Section (ìƒíƒœ)**

| í•­ëª© | ì„¤ëª… |
|-----|------|
| í˜„ì¬ ìƒíƒœ | í¬ë˜ì‹œ ë§ˆì»¤ ê°ì§€ ì—¬ë¶€ ë©”ì‹œì§€ |
| ê¸°ë¡ëœ ë¡œê·¸ | ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë¡œê·¸ ìˆ˜ |
| í¬ë˜ì‹œ ë§ˆì»¤ | mmap íŒŒì¼ì˜ í¬ë˜ì‹œ ë§ˆì»¤ ìƒíƒœ (ğŸ”´ ê°ì§€ë¨ / âšªï¸ ì—†ìŒ) |
| ì´ì „ í¬ë˜ì‹œ | ë³µêµ¬ëœ ë¡œê·¸ ì—¬ë¶€ (âœ… ìˆìŒ / âŒ ì—†ìŒ) |
| ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ | ìƒíƒœ ì •ë³´ ê°±ì‹  |

**Recording Section (ë¡œê·¸ ê¸°ë¡)**

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| ì‹œì‘/ì¤‘ì§€ | 1ì´ˆë§ˆë‹¤ ìë™ìœ¼ë¡œ ëœë¤ ë¡œê·¸ ìƒì„± |
| ì €ì¥ | `persist()`ë¡œ JSON íŒŒì¼ì— ì €ì¥ |
| í˜„ì¬ ë¡œê·¸ ë³´ê¸° | ê¸°ë¡ëœ ë¡œê·¸ ëª©ë¡ ì‹œíŠ¸ í‘œì‹œ |

**Crash Section (í¬ë˜ì‹œ í…ŒìŠ¤íŠ¸)**

| ë²„íŠ¼ | ë™ì‘ | ì•± ì¢…ë£Œ |
|-----|------|--------|
| ğŸ’¥ í¬ë˜ì‹œ ì‹œë®¬ë ˆì´ì…˜ | `persistSync()` í˜¸ì¶œ, mmap ë§ˆì»¤ë§Œ ê¸°ë¡ | âŒ |
| ğŸ’¥ğŸ’¥ fatalError | Swift fatalError ë°œìƒ (SIGILL) | âœ… |
| nil! | Force unwrap crash | âœ… |
| array[0] | Array index out of bounds | âœ… |
| NSException | Objective-C NSException | âœ… |

**Management Section (ê´€ë¦¬)**

| ê¸°ëŠ¥ | ì„¤ëª… |
|-----|------|
| mmap í¬ë˜ì‹œ ë§ˆì»¤ ì œê±° | `clearMmapData()` í˜¸ì¶œ |
| ëª¨ë“  ë¡œê·¸ ì‚­ì œ | `clear()` í˜¸ì¶œ, ë©”ëª¨ë¦¬ ë° íŒŒì¼ ì •ë¦¬ |

**Recovered Logs Section (ë³µêµ¬ëœ ë¡œê·¸)**

í¬ë˜ì‹œ í›„ ì•±ì„ ì¬ì‹œì‘í•˜ë©´ ì´ ì„¹ì…˜ì— ë³µêµ¬ëœ ë¡œê·¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.

#### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

**ì‹œë‚˜ë¦¬ì˜¤ 1: ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸ (ì•ˆì „)**

```
1. [Recording] "ì‹œì‘" ë²„íŠ¼ í´ë¦­
2. 5-10ì´ˆ ëŒ€ê¸° (ë¡œê·¸ ìë™ ìƒì„±)
3. [Crash] "ğŸ’¥ í¬ë˜ì‹œ ì‹œë®¬ë ˆì´ì…˜" í´ë¦­
4. âœ… ì•±ì€ ê³„ì† ì‹¤í–‰ë¨
5. [Status] "í¬ë˜ì‹œ ë§ˆì»¤: ğŸ”´ ê°ì§€ë¨" í™•ì¸
6. [Management] "mmap í¬ë˜ì‹œ ë§ˆì»¤ ì œê±°" í´ë¦­
7. [Status] "í¬ë˜ì‹œ ë§ˆì»¤: âšªï¸ ì—†ìŒ" í™•ì¸
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹¤ì œ í¬ë˜ì‹œ â†’ ë³µêµ¬ (ì „ì²´ í”Œë¡œìš°)**

```
1. Crash íƒ­ ì—´ê¸°
2. [Recording] "ì‹œì‘" ë²„íŠ¼ í´ë¦­
3. 5-10ì´ˆ ëŒ€ê¸° (ë¡œê·¸ ìë™ ìƒì„±)
4. [Crash] "ğŸ’¥ğŸ’¥ fatalError" ë²„íŠ¼ í´ë¦­
5. âš ï¸ ì•±ì´ í¬ë˜ì‹œë¨ (ì •ìƒ)
6. ì•± ì¬ì‹¤í–‰
7. Crash íƒ­ ì—´ê¸°
8. âœ… "ì´ì „ í¬ë˜ì‹œ: âœ… ìˆìŒ" í‘œì‹œ í™•ì¸
9. âœ… "í¬ë˜ì‹œ ë§ˆì»¤: ğŸ”´ ê°ì§€ë¨" í™•ì¸
10. "ë³µêµ¬ëœ ë¡œê·¸ ë³´ê¸°" í´ë¦­
11. âœ… í¬ë˜ì‹œ ì§ì „ ë¡œê·¸ í™•ì¸
```

#### ì˜ˆìƒ ê²°ê³¼

**í¬ë˜ì‹œ í›„ ì¬ì‹¤í–‰ ì‹œ:**

```
Status Section:
- í˜„ì¬ ìƒíƒœ: âš ï¸ í¬ë˜ì‹œ ë§ˆì»¤ ê°ì§€ë¨!
- ê¸°ë¡ëœ ë¡œê·¸: 0ê°œ (ìƒˆ ì„¸ì…˜)
- í¬ë˜ì‹œ ë§ˆì»¤: ğŸ”´ ê°ì§€ë¨
- ì´ì „ í¬ë˜ì‹œ: âœ… ìˆìŒ (5ê°œ)

Recovered Logs:
- [FATAL] ğŸ’¥ğŸ’¥ğŸ’¥ REAL CRASH - App will terminate NOW
- [INFO] ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í–ˆìŠµë‹ˆë‹¤
- [WARNING] ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì‹œì‘
- [DEBUG] ë°ì´í„° ë¡œë”© ì™„ë£Œ
- [INFO] í™”ë©´ ì „í™˜ ë°œìƒ
```

#### ì£¼ì˜ì‚¬í•­

**1. Xcode ë””ë²„ê±°**

Xcodeì—ì„œ ì‹¤í–‰ ì‹œ ë””ë²„ê±°ê°€ í¬ë˜ì‹œë¥¼ ìºì¹˜í•©ë‹ˆë‹¤.
- Xcodeì—ì„œ ì‹¤í–‰ ì¤‘ì§€ í›„ ì‹œë®¬ë ˆì´í„°ì—ì„œ ì•± ì§ì ‘ ì‹¤í–‰
- ë˜ëŠ” "Continue program execution" ì„ íƒ

**2. í¬ë˜ì‹œ ë¹ˆë„ ì œí•œ**

ë„ˆë¬´ ìì£¼ í¬ë˜ì‹œí•˜ë©´ iOSê°€ ì•±ì„ ì°¨ë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í¬ë˜ì‹œ í›„ 30ì´ˆ ì´ìƒ ëŒ€ê¸°
- í•˜ë£¨ì— 5-10íšŒ ì´ë‚´ë¡œ ì œí•œ

**3. ë°ì´í„° ì†ì‹¤**

ì‹¤ì œ í¬ë˜ì‹œëŠ” ì•±ì„ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤.
- í…ŒìŠ¤íŠ¸ ì „ ì¤‘ìš” ë°ì´í„° ë°±ì—…
- ê°œë°œ í™˜ê²½ì—ì„œë§Œ í…ŒìŠ¤íŠ¸
- í”„ë¡œë•ì…˜ì—ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜ë§Œ ì‚¬ìš©

#### CrashTracePreserver í†µí•©

TraceKitDemoëŠ” `TraceKitSetup`ì—ì„œ `CrashTracePreserver`ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```swift
enum TraceKitSetup {
    static let crashPreserver = CrashTracePreserver(preserveCount: 100)
    
    @MainActor
    static func configure() async {
        // ì´ì „ í¬ë˜ì‹œ í™•ì¸
        await checkPreviousCrash()
        
        // TraceKit êµ¬ì„±...
    }
    
    private static func checkPreviousCrash() async {
        if let logs = try? await crashPreserver.recover() {
            print("âš ï¸ ì´ì „ í¬ë˜ì‹œ ê°ì§€: \(logs.count)ê°œ ë¡œê·¸ ë³µêµ¬ë¨")
        }
    }
}
```

#### íŒŒì¼ ìœ„ì¹˜

ì‹œë®¬ë ˆì´í„°ì—ì„œ ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜:

```
~/Library/Developer/CoreSimulator/Devices/{DEVICE_ID}/data/
  Containers/Data/Application/{APP_ID}/
  Library/Caches/crash_logs.json      # JSON ë¡œê·¸ íŒŒì¼
  Library/Caches/crash_logs.mmap      # mmap í¬ë˜ì‹œ ë§ˆì»¤
```

#### ë” ì•Œì•„ë³´ê¸°

í¬ë˜ì‹œ ë¡œê·¸ ë³´ì¡´ ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì€ [ê³ ê¸‰ ê¸°ëŠ¥ - í¬ë˜ì‹œ ë¡œê·¸ ë³´ì¡´](./04-ê³ ê¸‰-ê¸°ëŠ¥.md#í¬ë˜ì‹œ-ë¡œê·¸-ë³´ì¡´) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Projects/TraceKitDemo/
â”œâ”€â”€ Project.swift                    # Tuist í”„ë¡œì íŠ¸ ì •ì˜
â”œâ”€â”€ Resources/
â”‚   â”œâ”€â”€ GoogleService-Info.plist.example  # Firebase ì„¤ì • ì˜ˆì‹œ
â”‚   â””â”€â”€ TraceKitDemo.entitlements    # ì•± ê¶Œí•œ ì„¤ì •
â”œâ”€â”€ Sources/
â”‚   â”œâ”€â”€ App/
â”‚   â”‚   â””â”€â”€ TraceKitDemoApp.swift     # ì•± ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ Presentation/
â”‚   â”‚   â”œâ”€â”€ MainTabView.swift       # íƒ­ ì»¨í…Œì´ë„ˆ
â”‚   â”‚   â”œâ”€â”€ LogGenerator/           # ë¡œê·¸ ìƒì„± í™”ë©´
â”‚   â”‚   â”œâ”€â”€ Settings/               # ì„¤ì • í™”ë©´
â”‚   â”‚   â”œâ”€â”€ LogViewer/              # ë¡œê·¸ ë·°ì–´ í™”ë©´
â”‚   â”‚   â”œâ”€â”€ Performance/            # ì„±ëŠ¥ ì¸¡ì • í™”ë©´
â”‚   â”‚   â”œâ”€â”€ SanitizerDemo/          # ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ ì‹œì—°
â”‚   â”‚   â”œâ”€â”€ CrashDemo/              # í¬ë˜ì‹œ ë¡œê·¸ ë³´ì¡´ ì‹œì—°
â”‚   â”‚   â”œâ”€â”€ AnalyticsRealtime/      # Firebase Analytics ì—°ë™
â”‚   â”‚   â”œâ”€â”€ CrashlyticsRealtime/    # Firebase Crashlytics ì—°ë™
â”‚   â”‚   â”œâ”€â”€ RemoteConfigControl/    # Firebase Remote Config
â”‚   â”‚   â””â”€â”€ ShoppingFlow/           # ì‡¼í•‘ í”Œë¡œìš° ì¶”ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ Infrastructure/
â”‚   â”‚   â”œâ”€â”€ TraceKitSetup.swift               # TraceKit ì´ˆê¸°í™”
â”‚   â”‚   â”œâ”€â”€ InMemoryTraceDestination.swift    # ì»¤ìŠ¤í…€ Destination
â”‚   â”‚   â”œâ”€â”€ TraceStream.swift                 # ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼
â”‚   â”‚   â”œâ”€â”€ FirebaseAnalyticsTraceDestination.swift   # Firebase Analytics ì—°ë™
â”‚   â”‚   â”œâ”€â”€ FirebaseCrashlyticsTraceDestination.swift # Firebase Crashlytics ì—°ë™
â”‚   â”‚   â”œâ”€â”€ FirebasePerformanceTraceDestination.swift # Firebase Performance ì—°ë™
â”‚   â”‚   â””â”€â”€ FirebaseRemoteConfigManager.swift         # Firebase Remote Config
â”‚   â”‚
â”‚   â””â”€â”€ Design/
â”‚       â”œâ”€â”€ Theme.swift             # ë‹¤í¬ í…Œë§ˆ ì •ì˜
â”‚       â””â”€â”€ Components/             # ì¬ì‚¬ìš© UI ì»´í¬ë„ŒíŠ¸
```

## ì˜ì¡´ì„±

TraceKitDemoëŠ” ë¡œì»¬ SPM íŒ¨í‚¤ì§€ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤:

```swift
packages: [
    .local(path: .relativeToRoot("../../"))
]

dependencies: [
    .package(product: "TraceKit", type: .runtime)
]
```

ë£¨íŠ¸ì˜ `Package.swift`ì—ì„œ TraceKitì„ ë¹Œë“œí•©ë‹ˆë‹¤.

### Firebase ì˜ì¡´ì„± (Optional)

Firebase ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒ íŒ¨í‚¤ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤:

```swift
dependencies: [
    .external(name: "FirebaseAnalytics"),
    .external(name: "FirebaseCrashlytics"),
    .external(name: "FirebasePerformance"),
    .external(name: "FirebaseRemoteConfig")
]
```

Firebase ì„¤ì • ë°©ë²•ì€ `Projects/TraceKitDemo/FIREBASE_MODULES_GUIDE.md`ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

## ì•„í‚¤í…ì²˜

### ë°ì´í„° íë¦„

```mermaid
%%{init: {'theme': 'dark', 'themeVariables': {'signalColor': '#e2e8f0', 'signalTextColor': '#f8fafc'}}}%%
sequenceDiagram
    participant User
    participant View
    participant TraceKit
    participant OSLog as OSTraceDestination
    participant File as FileTraceDestination
    participant InMemory as InMemoryDestination
    participant LogStream
    participant Viewer as LogViewerView

    User->>View: ë¡œê·¸ ë²„íŠ¼ íƒ­
    View->>TraceKit: TraceKit.info("ë©”ì‹œì§€")
    par ë³‘ë ¬ ì¶œë ¥
        TraceKit->>OSLog: log(message)
        OSLog-->>User: Xcode Console
    and
        TraceKit->>File: log(message)
        File-->>File: log-YYYY-MM-DD.log
    and
        TraceKit->>InMemory: log(message)
        InMemory->>LogStream: append(message)
        LogStream-->>Viewer: @Published ì—…ë°ì´íŠ¸
        Viewer-->>User: ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ 
    end
```

### êµ¬ì„±ëœ Destinations

ë°ëª¨ ì•±ì€ 3ê°œì˜ TraceDestinationì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

| Destination | ìš©ë„ | Formatter |
|------------|------|-----------|
| OSTraceDestination | Xcode ì½˜ì†”, Console.app | PrettyTraceFormatter.verbose |
| FileTraceDestination | ë””ë°”ì´ìŠ¤ì— ë¡œê·¸ íŒŒì¼ ì €ì¥ | JSONTraceFormatter |
| InMemoryTraceDestination | ì•± ë‚´ LogViewerì— ì‹¤ì‹œê°„ í‘œì‹œ | - |

```swift
// TraceKitSetup.swift
_ = await TraceKitBuilder()
    .addOSLog(
        subsystem: "com.logger.TraceKitDemo",
        formatter: PrettyTraceFormatter.verbose
    )
    .addFile(
        minLevel: .debug,
        retentionPolicy: .default  // 7ì¼ ë³´ê´€
    )
    .addDestination(inMemoryDestination)
    .with(configuration: .debug)
    .withDefaultSanitizer()
    .buildAsShared()
```

### InMemoryTraceDestination

ì•± ë‚´ì—ì„œ ë¡œê·¸ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ Destinationì…ë‹ˆë‹¤.

```swift
actor InMemoryTraceDestination: TraceDestination {
    let identifier = "in-memory"
    var minLevel: TraceLevel = .verbose
    var isEnabled: Bool = true
    
    private let stream: LogStream
    
    func log(_ message: TraceMessage) async {
        guard shouldLog(message) else { return }
        await MainActor.run {
            stream.append(message)
        }
    }
}
```

### LogStream

Combineì„ í™œìš©í•˜ì—¬ UIì— ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.

```swift
@MainActor
final class LogStream: ObservableObject {
    static let shared = LogStream()
    
    @Published private(set) var logs: [TraceMessage] = []
    
    func append(_ message: TraceMessage) {
        logs.append(message)
        // ìµœëŒ€ 500ê°œ ìœ ì§€
    }
}
```

## Launch Arguments

Xcodeì—ì„œ Scheme ì„¤ì •ì„ í†µí•´ ëŸ°íƒ€ì„ ë™ì‘ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ì¸ì | ì„¤ëª… |
|-----|------|
| `-logLevel DEBUG` | ìµœì†Œ ë¡œê·¸ ë ˆë²¨ì„ DEBUGë¡œ ì„¤ì • |
| `-logFilter Network,Auth` | Network, Auth ì¹´í…Œê³ ë¦¬ë§Œ í™œì„±í™” |
| `-sampleRate 0.5` | 50% ìƒ˜í”Œë§ |
| `-bufferSize 100` | ë²„í¼ í¬ê¸° 100 |
| `-flushInterval 5.0` | 5ì´ˆë§ˆë‹¤ í”ŒëŸ¬ì‹œ |
| `-disableConsole` | ì½˜ì†” ì¶œë ¥ ë¹„í™œì„±í™” |
| `-disableOSLog` | OSLog ë¹„í™œì„±í™” |
| `-disableFile` | íŒŒì¼ ë¡œê¹… ë¹„í™œì„±í™” |
| `-disableMasking` | ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ ë¹„í™œì„±í™” |
| `-enableMasking` | ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ í™œì„±í™” |

Scheme ì„¤ì • ë°©ë²•:
1. Xcodeì—ì„œ Product â†’ Scheme â†’ Edit Scheme
2. Run â†’ Arguments íƒ­
3. Arguments Passed On Launchì—ì„œ ì²´í¬ë°•ìŠ¤ í† ê¸€

## ë„¤íŠ¸ì›Œí¬ ë¡œê¹… JSON ì˜ˆì‹œ

Generator íƒ­ì˜ "Network Logging (JSON)" ì„¹ì…˜ì—ì„œ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ ë¡œê¹… ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Request ë¡œê¹… ì˜ˆì‹œ

```swift
TraceKit.debug(
    "API ìš”ì²­ ì‹œì‘",
    category: "Network",
    metadata: [
        "method": "GET",
        "url": "https://api.example.com/users/123",
        "headers": [
            "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxMjM0NTYifQ.mock",
            "Content-Type": "application/json"
        ],
        "timeout": 30.0
    ]
)
```

ì¶œë ¥ ê²°ê³¼ (Xcode Consoleì—ì„œ í™•ì¸):
```
ğŸ” DEBUG [Network] API ìš”ì²­ ì‹œì‘ (LogGeneratorViewModel.swift:75)
  headers: 
    Accept: application/json
    Authorization: Bearer [JWT_REDACTED]
    Content-Type: application/json
  method: GET
  timeout: 30.0
  url: https://api.example.com/users/123
```

ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ì´ í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©´ JWT í† í°ì´ ìë™ìœ¼ë¡œ `[JWT_REDACTED]`ë¡œ ë§ˆìŠ¤í‚¹ë©ë‹ˆë‹¤.

### Response ë¡œê¹… ì˜ˆì‹œ

```swift
TraceKit.info(
    "API ì‘ë‹µ ì„±ê³µ",
    category: "Network",
    metadata: [
        "statusCode": 200,
        "duration": 0.234,
        "responseBody": [
            "id": 123,
            "name": "í™ê¸¸ë™",
            "email": "hong@example.com",
            "createdAt": "2025-12-15T10:30:00Z"
        ],
        "headers": [
            "Content-Type": "application/json",
            "X-Request-Id": "req-abc123"
        ]
    ]
)
```

### Error ë¡œê¹… ì˜ˆì‹œ

```swift
TraceKit.error(
    "API ìš”ì²­ ì‹¤íŒ¨: ì¸ì¦ ì˜¤ë¥˜",
    category: "Network",
    metadata: [
        "statusCode": 401,
        "url": "https://api.example.com/users/123",
        "duration": 0.156,
        "error": [
            "code": "UNAUTHORIZED",
            "message": "í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤",
            "details": [
                "expiredAt": "2025-12-15T09:00:00Z",
                "tokenType": "access_token"
            ]
        ],
        "retryable": true,
        "retryCount": 0
    ]
)
```

### ì „ì²´ ì‚¬ì´í´ ì˜ˆì‹œ

"ì „ì²´ ì‚¬ì´í´" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹¤ìŒ ìˆœì„œë¡œ ë¡œê·¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤:

1. `DEBUG` - ìš”ì²­ ì‹œì‘ (POST /orders)
2. `INFO` - ì‘ë‹µ ìˆ˜ì‹  (201 Created)
3. `VERBOSE` - ì²˜ë¦¬ ì™„ë£Œ

ì´ë¥¼ í†µí•´ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ í†µì‹  íë¦„ì„ ì‹œë®¬ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë””ìì¸ ì‹œìŠ¤í…œ

### ìƒ‰ìƒ

| ìš©ë„ | ìƒ‰ìƒ ì½”ë“œ | ì„¤ëª… |
|-----|---------|------|
| Background | `#0F0F0F` | ë©”ì¸ ë°°ê²½ |
| Surface | `#1A1A1A` | ì¹´ë“œ ë°°ê²½ |
| Accent | `#00D4AA` | ê°•ì¡° ìƒ‰ìƒ (ë¯¼íŠ¸) |
| Text Primary | `#F5F5F5` | ì£¼ìš” í…ìŠ¤íŠ¸ |
| Text Secondary | `#9E9E9E` | ë³´ì¡° í…ìŠ¤íŠ¸ |

### ë¡œê·¸ ë ˆë²¨ ìƒ‰ìƒ

| ë ˆë²¨ | ìƒ‰ìƒ |
|-----|------|
| VERBOSE | `#757575` (íšŒìƒ‰) |
| DEBUG | `#64B5F6` (íŒŒë‘) |
| INFO | `#81C784` (ì´ˆë¡) |
| WARNING | `#FFD54F` (ë…¸ë‘) |
| ERROR | `#E57373` (ë¹¨ê°•) |
| FATAL | `#F44336` (ì§„í•œ ë¹¨ê°•) |

## ë‹¤ìŒ ë‹¨ê³„

- [í”„ë¡œì íŠ¸ ê°œìš”](./01-í”„ë¡œì íŠ¸-ê°œìš”.md) - TraceKit ê¸°ë³¸ ê¸°ëŠ¥ ì´í•´
- [ì‚¬ìš©ë²•](./03-ì‚¬ìš©ë²•.md) - ì½”ë“œì—ì„œ TraceKit ì‚¬ìš©í•˜ê¸°
- [ëŸ°íƒ€ì„ ì„¤ì •](./06-ëŸ°íƒ€ì„-ì„¤ì •.md) - Launch Arguments ìƒì„¸

